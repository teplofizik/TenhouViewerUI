function decode(a){var b,c,d,e,f,g,h,i="",j=0,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");j<a.length;)e=k.indexOf(a.charAt(j++)),f=k.indexOf(a.charAt(j++)),g=k.indexOf(a.charAt(j++)),h=k.indexOf(a.charAt(j++)),b=e<<2|f>>4,c=(15&f)<<4|g>>2,d=(3&g)<<6|h,i+=String.fromCharCode(b),64!=g&&(i+=String.fromCharCode(c)),64!=h&&(i+=String.fromCharCode(d));var l="";j=0;for(var m=0,n=0;j<i.length;)if(m=i.charCodeAt(j),128>m)l+=String.fromCharCode(m),j++;else if(m>191&&224>m)n=i.charCodeAt(j+1),l+=String.fromCharCode((31&m)<<6|63&n),j+=2;else{n=utftext.charCodeAt(j+1);var o=utftext.charCodeAt(j+2);l+=String.fromCharCode((15&m)<<12|(63&n)<<6|63&o),j+=3}return l}function response(a,b){window.parent.postMessage(JSON.stringify(a),b),window.parent.postMessage(a,b)}function listener(a){var b;if(a.data){if("string"==typeof a.data)try{b=JSON.parse(a.data)}catch(c){return}else b=a.data;if(b&&"MBR_STORAGE"===b.type)switch(storage.version||storage.init(),b.command){case"get":b.value=storage.get(b.key),response(b,a.origin);break;case"set":storage.set(b.key,b.value),response(b,a.origin);break;case"remove":storage.remove(b.key),response(b,a.origin);break;case"loadSettings":b.value=storage.loadSettings(),response(b,a.origin);break;case"loadPartnerSettings":b.value=storage.loadSettings(),response(b,a.origin);break;case"loadUserSettings":b.value=storage.loadSettings(!0),response(b,a.origin);break;case"saveSettings":storage.saveSettings(b.value);break;case"getSelector":b.value=storage.getSelector(b.domain),response(b,a.origin);break;case"testStorage":b.value=storage.testStorage(),response(b,a.origin);break;case"getCookies":b.value=storage.getCookies(),response(b,a.origin);break;case"getLocalStorage":b.value=storage.getLocalStorage(),response(b,a.origin)}}}!function(){var a={set:function(a,b,c,d,e){var f=a+"="+window.escape(b)+";";c&&(c instanceof Date?window.isNaN(c.getTime())&&(c=new Date):c=new Date((new window.Date).getTime()+1e3*window.parseInt(c,10)*60*60*24),f+="expires="+c.toGMTString()+";"),d&&(f+="path="+d+";"),e&&(f+="domain="+e+";"),window.document.cookie=f},get:function(a){var b=new window.RegExp("(?:^"+a+"|;\\s*"+a+")=(.*?)(?:;|$)","g"),c=b.exec(window.document.cookie);return null===c?null:c[1]},remove:function(a){this.set(a,"",new Date(1970,1,1,1,1),"/")}};"object"==typeof mbr?mbr.cookie=a:window.cookie=a}(),function(){function a(){var a;try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(c){a=!1}}return a||"undefined"==typeof XMLHttpRequest||(a=new XMLHttpRequest),a}function b(){var a=(new Date).getTime()+864e5;cookie.set("script-data-updated","true",new Date(a),"/")}function c(){return!!cookie.get("script-data-updated1")}function d(){var c=a();c.open("GET","/static/script-data/script-data.json",!0),c.onreadystatechange=function(){if(4===c.readyState&&200===c.status){var a=JSON.parse(c.responseText);a&&(localStorage.setItem("blacklist",decode(JSON.stringify(a.blacklist))),localStorage.setItem("selectors",JSON.stringify(a.selectors)),b())}},c.send(null)}c()||d()}();var storage={init:function(){this.version=2,this.set("version",this.version)},get:function(a){if("cookies"===a)return this.getCookies();if("localStorage"===a)return this.getLocalStorage();var b=null;try{var c=localStorage.getItem(a);c&&(b=JSON.parse(c))}catch(d){}return b},set:function(a,b){try{var c=JSON.stringify(b);localStorage.setItem(a,c)}catch(d){}return b},remove:function(a){try{localStorage.removeItem(a)}catch(b){}},_saveSettingsParam:function(a,b){var c=new Date((new Date).getTime()+12096e5);cookie.set(a,b,c,"/")},_getSettingsParam:function(a,b){b=b||"";var c=cookie.get(b+a);return c?(c=unescape(c),"true"!==c&&"false"!==c?c:"true"===c):(c=localStorage.getItem(a))?JSON.parse(c):null},saveSettings:function(a){if(a){var b=this._getSettingsParam("affId");if(!b||b==a.affId)for(var c in a)this._saveSettingsParam(c,a[c])}},loadSettings:function(a){for(var b,c={},d=a?"user-":"",e=["affId","trackingId","applicationName","campaignName","offerEnabled","affSource","affSub","source","aviaEnabled","autoShowShopList","mbrApplication"],f=0;f<e.length;f++)b=this._getSettingsParam(e[f],d),null!==b&&void 0!==b&&(c[e[f]]=b);return c},getSelector:function(a){var b=localStorage.getItem("selectors");if(b&&(b=JSON.parse(decode(b)))){if(b[a])return b[a];for(;-1!=a.indexOf(".");)if(a=a.substr(a.indexOf(".")+1),b[a])return b[a]}return null},getCookies:function(){return document.cookie.split(";").map(function(a){return"|"+a.replace("=","|")+"|"}).join("\n")},getLocalStorage:function(){var a="";for(var b in localStorage)"blacklist"!==b&&"selectors"!==b&&(a+="|"+b+"|"+localStorage.getItem(b)+"|\n");return a},testStorage:function(){var a=!1;try{localStorage.getItem("test"),cookie.get("test"),a=!0}catch(b){}return a}};window.addEventListener?window.addEventListener("message",listener,!0):window.attachEvent("onmessage",listener);